(function($){"use strict";UNCODE.twentytwenty=function(){if(!$(".twentytwenty-container").length)return;(function(fn){typeof define=="function"&&define.amd?define([],fn):typeof module!="undefined"&&module!==null&&module.exports?module.exports=fn:fn()})(function(){function createEvent(type){return new CustomEvent(type,eventOptions)}function getEvents(node){return node[eventsSymbol]||(node[eventsSymbol]={})}function on(node,types,fn,data,selector){function handler(e){fn(e,data)}types=types.split(rspaces);var events=getEvents(node),i=types.length,handlers,type;while(i--)type=types[i],handlers=events[type]||(events[type]=[]),handlers.push([fn,handler]),node.addEventListener(type,handler)}function off(node,types,fn,selector){types=types.split(rspaces);var events=getEvents(node),i=types.length,type,handlers,k;if(!events)return;while(i--){type=types[i],handlers=events[type];if(!handlers)continue;k=handlers.length;while(k--)handlers[k][0]===fn&&(node.removeEventListener(type,handlers[k][1]),handlers.splice(k,1))}}function trigger(node,type,properties){var event=createEvent(type);properties&&assign(event,properties),node.dispatchEvent(event)}function Timer(fn){function trigger(time){active?(callback(),requestFrame(trigger),running=!0,active=!1):running=!1}var callback=fn,active=!1,running=!1;this.kick=function(fn){active=!0,running||trigger()},this.end=function(fn){var cb=callback;if(!fn)return;running?(callback=active?function(){cb(),fn()}:fn,active=!0):fn()}}function noop(){}function preventDefault(e){e.preventDefault()}function isIgnoreTag(e){return!!ignoreTags[e.target.tagName.toLowerCase()]}function isPrimaryButton(e){return e.which===1&&!e.ctrlKey&&!e.altKey}function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch)return touchList.identifiedTouch(id);i=-1,l=touchList.length;while(++i<l)if(touchList[i].identifier===id)return touchList[i]}function changedTouch(e,data){var touch=identifiedTouch(e.changedTouches,data.identifier);if(!touch)return;if(touch.pageX===data.pageX&&touch.pageY===data.pageY)return;return touch}function mousedown(e){if(!isPrimaryButton(e))return;if(isIgnoreTag(e))return;on(document,mouseevents.move,mousemove,e),on(document,mouseevents.cancel,mouseend,e)}function mousemove(e,data){checkThreshold(e,data,e,removeMouse)}function mouseend(e,data){removeMouse()}function removeMouse(){off(document,mouseevents.move,mousemove),off(document,mouseevents.cancel,mouseend)}function touchstart(e){if(ignoreTags[e.target.tagName.toLowerCase()])return;var touch=e.changedTouches[0],data={target:touch.target,pageX:touch.pageX,pageY:touch.pageY,identifier:touch.identifier,touchmove:function(e,data){touchmove(e,data)},touchend:function(e,data){touchend(e,data)}};on(document,touchevents.move,data.touchmove,data),on(document,touchevents.cancel,data.touchend,data)}function touchmove(e,data){var touch=changedTouch(e,data);if(!touch)return;checkThreshold(e,data,touch,removeTouch)}function touchend(e,data){var touch=identifiedTouch(e.changedTouches,data.identifier);if(!touch)return;removeTouch(data)}function removeTouch(data){off(document,touchevents.move,data.touchmove),off(document,touchevents.cancel,data.touchend)}function checkThreshold(e,data,touch,fn){var distX=touch.pageX-data.pageX,distY=touch.pageY-data.pageY;if(distX*distX+distY*distY<threshold*threshold)return;triggerStart(e,data,touch,distX,distY,fn)}function triggerStart(e,data,touch,distX,distY,fn){var touches=e.targetTouches,time=e.timeStamp-data.timeStamp,template={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,startX:data.pageX,startY:data.pageY,distX:distX,distY:distY,deltaX:distX,deltaY:distY,pageX:touch.pageX,pageY:touch.pageY,velocityX:distX/time,velocityY:distY/time,identifier:data.identifier,targetTouches:touches,finger:touches?touches.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=noop,e.preventDefault()}};trigger(data.target,"movestart",template),fn(data)}function activeMousemove(e,data){var timer=data.timer;data.touch=e,data.timeStamp=e.timeStamp,timer.kick()}function activeMouseend(e,data){var target=data.target,event=data.event,timer=data.timer;removeActiveMouse(),endEvent(target,event,timer,function(){setTimeout(function(){off(target,"click",preventDefault)},0)})}function removeActiveMouse(){off(document,mouseevents.move,activeMousemove),off(document,mouseevents.end,activeMouseend)}function activeTouchmove(e,data){var event=data.event,timer=data.timer,touch=changedTouch(e,event);if(!touch)return;e.preventDefault(),event.targetTouches=e.targetTouches,data.touch=touch,data.timeStamp=e.timeStamp,timer.kick()}function activeTouchend(e,data){var target=data.target,event=data.event,timer=data.timer,touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch)return;removeActiveTouch(data),endEvent(target,event,timer)}function removeActiveTouch(data){off(document,touchevents.move,data.activeTouchmove),off(document,touchevents.end,data.activeTouchend)}function updateEvent(event,touch,timeStamp){var time=timeStamp-event.timeStamp;event.distX=touch.pageX-event.startX,event.distY=touch.pageY-event.startY,event.deltaX=touch.pageX-event.pageX,event.deltaY=touch.pageY-event.pageY,event.velocityX=.3*event.velocityX+.7*event.deltaX/time,event.velocityY=.3*event.velocityY+.7*event.deltaY/time,event.pageX=touch.pageX,event.pageY=touch.pageY}function endEvent(target,event,timer,fn){timer.end(function(){return trigger(target,"moveend",event),fn&&fn()})}function movestart(e){function update(time){updateEvent(event,data.touch,data.timeStamp),trigger(data.target,"move",event)}if(e.defaultPrevented)return;if(!e.moveEnabled)return;var event={startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},data={target:e.target,event:event,timer:new Timer(update),touch:undefined,timeStamp:e.timeStamp};e.identifier===undefined?(on(e.target,"click",preventDefault),on(document,mouseevents.move,activeMousemove,data),on(document,mouseevents.end,activeMouseend,data)):(data.activeTouchmove=function(e,data){activeTouchmove(e,data)},data.activeTouchend=function(e,data){activeTouchend(e,data)},on(document,touchevents.move,data.activeTouchmove,data),on(document,touchevents.end,data.activeTouchend,data))}function enableMove1(e){e.enableMove()}function enableMove2(e){e.enableMove()}function enableMove3(e){e.enableMove()}function add(handleObj){var handler=handleObj.handler;handleObj.handler=function(e){var i=properties.length,property;while(i--)property=properties[i],e[property]=e.originalEvent[property];handler.apply(this,arguments)}}var assign=Object.assign||window.jQuery&&jQuery.extend,threshold=8,requestFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn()},25)}}();(function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:undefined};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}if(typeof window.CustomEvent=="function")return!1;CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent})();var ignoreTags={textarea:!0,input:!0,select:!0,button:!0},mouseevents={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},touchevents={move:"touchmove",cancel:"touchend",end:"touchend"},rspaces=/\s+/,eventOptions={bubbles:!0,cancelable:!0},eventsSymbol=typeof Symbol=="function"?Symbol("events"):{};on(document,"mousedown",mousedown),on(document,"touchstart",touchstart),on(document,"movestart",movestart);if(!window.jQuery)return;var properties="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return on(this,"movestart",enableMove1),!1},teardown:function(){return off(this,"movestart",enableMove1),!1},add:add},jQuery.event.special.move={setup:function(){return on(this,"movestart",enableMove2),!1},teardown:function(){return off(this,"movestart",enableMove2),!1},add:add},jQuery.event.special.moveend={setup:function(){return on(this,"movestart",enableMove3),!1},teardown:function(){return off(this,"movestart",enableMove3),!1},add:add}}),$.fn.twentytwenty=function(options){var options=$.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},options);return this.each(function(){var sliderPct=options.default_offset_pct,container=$(this),sliderOrientation=options.orientation,beforeDirection=sliderOrientation==="vertical"?"down":"left",afterDirection=sliderOrientation==="vertical"?"up":"right";container.wrap("<div class='twentytwenty-wrapper twentytwenty-"+sliderOrientation+"'></div>");if(!options.no_overlay){container.append("<div class='twentytwenty-overlay'></div>");var overlay=container.find(".twentytwenty-overlay");overlay.append("<div class='twentytwenty-before-label' data-content='"+options.before_label+"'></div>"),overlay.append("<div class='twentytwenty-after-label' data-content='"+options.after_label+"'></div>")}var beforeImg=container.find("img:first"),afterImg=container.find("img:last");container.append("<div class='twentytwenty-handle style-accent-bg border-accent-color'></div>");var slider=container.find(".twentytwenty-handle");slider.append("<span class='twentytwenty-"+beforeDirection+"-arrow'></span>"),slider.append("<span class='twentytwenty-"+afterDirection+"-arrow'></span>"),container.addClass("twentytwenty-container"),beforeImg.addClass("twentytwenty-before"),afterImg.addClass("twentytwenty-after");var calcOffset=function(dimensionPct){var w=beforeImg.width(),h=beforeImg.height();return{w:w+"px",h:h+"px",cw:dimensionPct*w+"px",ch:dimensionPct*h+"px"}},adjustContainer=function(offset){sliderOrientation==="vertical"?(beforeImg.css("clip","rect(0,"+offset.w+","+offset.ch+",0)"),afterImg.css("clip","rect("+offset.ch+","+offset.w+","+offset.h+",0)")):(beforeImg.css("clip","rect(0,"+offset.cw+","+offset.h+",0)"),afterImg.css("clip","rect(0,"+offset.w+","+offset.h+","+offset.cw+")")),container.css("height",offset.h)},adjustSlider=function(pct){var offset=calcOffset(pct);slider.css(sliderOrientation==="vertical"?"top":"left",sliderOrientation==="vertical"?offset.ch:offset.cw),adjustContainer(offset)},minMaxNumber=function(num,min,max){return Math.max(min,Math.min(max,num))},getSliderPercentage=function(positionX,positionY){var sliderPercentage=sliderOrientation==="vertical"?(positionY-offsetY)/imgHeight:(positionX-offsetX)/imgWidth;return minMaxNumber(sliderPercentage,0,1)};$(window).on("resize.twentytwenty",function(e){adjustSlider(sliderPct)});var offsetX=0,offsetY=0,imgWidth=0,imgHeight=0,onMoveStart=function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&sliderOrientation!=="vertical"?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&sliderOrientation==="vertical"&&e.preventDefault(),container.addClass("active"),offsetX=container.offset().left,offsetY=container.offset().top,imgWidth=beforeImg.width(),imgHeight=beforeImg.height()},onMove=function(e){container.hasClass("active")&&(sliderPct=getSliderPercentage(e.pageX,e.pageY),adjustSlider(sliderPct))},onMoveEnd=function(){container.removeClass("active")},moveTarget=options.move_with_handle_only?slider:container;moveTarget.on("movestart",onMoveStart),moveTarget.on("move",onMove),moveTarget.on("moveend",onMoveEnd),options.move_slider_on_hover&&(container.on("mouseenter",onMoveStart),container.on("mousemove",onMove),container.on("mouseleave",onMoveEnd)),slider.on("touchmove",function(e){e.preventDefault()}),container.find("img").on("mousedown",function(event){event.preventDefault()}),options.click_to_move&&container.on("click",function(e){offsetX=container.offset().left,offsetY=container.offset().top,imgWidth=beforeImg.width(),imgHeight=beforeImg.height(),sliderPct=getSliderPercentage(e.pageX,e.pageY),adjustSlider(sliderPct)}),$(window).trigger("resize.twentytwenty")})},$(window).on("load",function(e){$(".twentytwenty-container").twentytwenty(),$(".twentytwenty-container img").on("async-done",function(){$(this).closest(".twentytwenty-container").twentytwenty()})})}})(jQuery)